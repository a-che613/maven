module.exports = [
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/events [external] (events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}),
"[externals]/url [external] (url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}),
"[externals]/util [external] (util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}),
"[externals]/fs [external] (fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}),
"[externals]/http [external] (http, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}),
"[externals]/https [external] (https, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}),
"[externals]/zlib [external] (zlib, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}),
"[externals]/stream [external] (stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}),
"[externals]/net [external] (net, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}),
"[externals]/dns [external] (dns, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("dns", () => require("dns"));

module.exports = mod;
}),
"[externals]/os [external] (os, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}),
"[externals]/path [external] (path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}),
"[externals]/crypto [external] (crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}),
"[externals]/tls [external] (tls, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}),
"[externals]/child_process [external] (child_process, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("child_process", () => require("child_process"));

module.exports = mod;
}),
"[project]/src/app/api/send-confirmation/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "POST",
    ()=>POST
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$nodemailer$2f$lib$2f$nodemailer$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/nodemailer/lib/nodemailer.js [app-route] (ecmascript)");
;
;
// Initialize Nodemailer transporter
const transporter = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$nodemailer$2f$lib$2f$nodemailer$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].createTransport({
    host: "smtp.zoho.com",
    port: 465,
    secure: true,
    auth: {
        user: process.env.EMAIL_USER || "support@mavenrnvn.com",
        pass: process.env.EMAIL_PASSWORD
    },
    tls: {
        rejectUnauthorized: false
    }
});
/* ============================
   Customer Order Confirmation Template
   (Same as in the checkout route)
============================ */ const createCustomerConfirmationEmail = ({ orderNumber, customerName, items, total, paymentMethod })=>{
    const paymentMethodText = {
        'bank-transfer': 'Bank Transfer',
        'btc-wallet': 'BTC Wallet',
        'gift-card': 'Gift Card'
    }[paymentMethod] || paymentMethod;
    return `
    <!DOCTYPE html>
    <html>
    <head>
      <style>
        body { font-family: 'Inter', Arial, sans-serif; line-height: 1.6; color: #333; background: #f9fafb; margin: 0; padding: 0; }
        .container { max-width: 600px; margin: 0 auto; background: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); }
        .header { background: #111827; color: #ffffff; padding: 24px; text-align: center; }
        .header h1 { margin: 0; font-size: 24px; font-weight: 600; }
        .content { padding: 24px; }
        .thank-you { font-size: 20px; font-weight: 600; color: #111827; margin-bottom: 16px; }
        .order-number { background-color: #f0fdf4; color: #065f46; padding: 4px 8px; border-radius: 4px; font-weight: 500; font-size: 14px; display: inline-block; margin-bottom: 16px; }
        .section { margin-bottom: 24px; }
        .section-title { font-size: 18px; font-weight: 600; color: #111827; margin-bottom: 12px; border-bottom: 1px solid #e5e7eb; padding-bottom: 8px; }
        .order-items { width: 100%; border-collapse: collapse; margin-top: 8px; }
        .order-items th { text-align: left; background-color: #f9fafb; padding: 12px; font-size: 14px; color: #4b5563; border-bottom: 1px solid #e5e7eb; }
        .order-items td { padding: 16px 12px; border-bottom: 1px solid #e5e7eb; vertical-align: top; }
        .item-name { font-weight: 500; color: #111827; }
        .item-quantity, .item-price { color: #4b5563; }
        .order-totals { margin-top: 24px; text-align: right; }
        .total-row { display: flex; justify-content: space-between; max-width: 200px; margin-left: auto; padding: 8px 0; }
        .total-label { color: #4b5563; }
        .total-value { font-weight: 600; color: #111827; }
        .grand-total { font-size: 18px; border-top: 2px solid #e5e7eb; margin-top: 8px; padding-top: 12px; }
        .footer { background-color: #f9fafb; padding: 24px; text-align: center; color: #6b7280; font-size: 14px; line-height: 1.6; }
        .payment-method { display: inline-block; background-color: #eff6ff; color: #1e40af; padding: 4px 8px; border-radius: 4px; font-size: 14px; margin-top: 8px; }
        .next-steps { background-color: #f8fafc; border-left: 4px solid #3b82f6; padding: 12px 16px; margin: 16px 0; border-radius: 0 4px 4px 0; }
        .next-steps-title { font-weight: 600; color: #1e40af; margin-bottom: 8px; }
        .next-steps-list { margin: 0; padding-left: 20px; }
        .customer-details { margin-bottom: 24px; }
        .customer-details p { margin: 4px 0; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>Thank you for your order!</h1>
        </div>

        <div class="content">
          <p class="thank-you">Hi ${customerName},</p>
          <p>We've received your order and it's being processed. You'll receive another email once your items are on their way.</p>
          
          <div class="order-number">Order #${orderNumber}</div>
          
          <div class="customer-details">
            <div class="section-title">Order Details</div>
            <p><strong>Order Number:</strong> ${orderNumber}</p>
            <p><strong>Order Date:</strong> ${new Date().toLocaleDateString()}</p>
            <p><strong>Payment Method:</strong> ${paymentMethodText}</p>
          </div>
          
          <div class="section">
            <div class="section-title">Order Summary</div>
            <table class="order-items">
              <thead>
                <tr>
                  <th>Product</th>
                  <th>Quantity</th>
                  <th>Price</th>
                </tr>
              </thead>
              <tbody>
                ${items.map((item)=>`
                  <tr>
                    <td class="item-name">${item.name}</td>
                    <td class="item-quantity">${item.quantity}</td>
                    <td class="item-price">$${item.price.toFixed(2)}</td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>

          <div class="order-totals">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span class="total-value">$${total.toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Shipping:</span>
              <span class="total-value">$0.00</span>
            </div>
            <div class="total-row grand-total">
              <span class="total-label">Total:</span>
              <span class="total-value">$${total.toFixed(2)}</span>
            </div>
            <div class="payment-method">
              ${paymentMethodText} Payment
            </div>
          </div>

          <div class="next-steps">
            <div class="next-steps-title">What's Next?</div>
            <ul class="next-steps-list">
              <li>We'll process your order within 24 hours</li>
              <li>You'll receive a shipping confirmation with tracking information</li>
              <li>For any questions, reply to this email or contact our support</li>
            </ul>
          </div>
        </div>

        <div class="footer">
          <p>Thank you for shopping with us!</p>
          <p>If you have any questions about your order, please don't hesitate to contact our customer service team.</p>
          <p>Â© ${new Date().getFullYear()} Maven. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `;
};
async function POST(request) {
    try {
        const { customer, items, total, orderNumber } = await request.json();
        if (!customer || !items?.length || total === undefined || !orderNumber) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: "Invalid request payload"
            }, {
                status: 400
            });
        }
        // Send order confirmation email to customer using Nodemailer
        const mailOptions = {
            from: `"Maven Orders" <support@mavenrnvn.com>`,
            to: customer.email,
            subject: `Your Order #${orderNumber} Confirmation`,
            html: createCustomerConfirmationEmail({
                orderNumber,
                customerName: customer.name,
                items,
                total,
                paymentMethod: customer.paymentMethod || 'bank-transfer'
            })
        };
        const info = await transporter.sendMail(mailOptions);
        if (!info.accepted || info.accepted.length === 0) {
            console.error('Email not accepted by SMTP server:', info);
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: 'Failed to send confirmation email',
                details: info
            }, {
                status: 500
            });
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true,
            message: 'Confirmation email sent successfully',
            messageId: info.messageId
        });
    } catch (error) {
        console.error('Send confirmation error:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: 'Failed to process confirmation email',
            details: error.message
        }, {
            status: 500
        });
    }
}
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__75b0428e._.js.map